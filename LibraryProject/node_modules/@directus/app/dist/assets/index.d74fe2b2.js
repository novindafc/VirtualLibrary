var Ee=Object.defineProperty,Ae=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var ge=(e,t,n)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,se=(e,t)=>{for(var n in t||(t={}))Re.call(t,n)&&ge(e,n,t[n]);if(me)for(var n of me(t))Pe.call(t,n)&&ge(e,n,t[n]);return e},_e=(e,t)=>Ae(e,je(t));import{v as y,y as K,n as M,u as W,o as V,a1 as re,r as l,I as X,J as T,p as d,q as $,w as u,W as I,t as a,L as j,aF as He,z as L,Z as te,N as U,O as ye,az as ie,S as B,A as N,l as le,a0 as ne,ay as Te,V as $e,bl as Fe,D as z,R as be,aH as he,an as qe,E as We,U as ze,ai as h,K as Ge,C as Je,P as Qe,Q as Ke,a2 as Xe,a3 as Ze}from"./vendor.546e1516.js";import{u as Ye,a as we,_ as E,b as ke,g as Se,c as ue,d as Z,e as ce,M as xe,t as et,f as tt,h as nt,i as ot,j as Ie,l as at,k as st,m as rt,n as it,o as Ve,p as Ce,q as lt,H as ut}from"./index.f7322f54.entry.js";import"./use-sync.6d20172a.js";function ct(e){const t=`directus-${e}`,n=y(null);function c(){let s;try{s=localStorage.getItem(t)}catch{}if(!!s)try{const r=JSON.parse(s);n.value=r}catch{}}return c(),K(n,()=>{try{n.value==null?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(n.value))}catch{}}),{data:n}}const dt=M({setup(){const{t:e}=W(),t=Ye(),n=we(),c=V(()=>{var v;return n.settings===null||!((v=n.settings)==null?void 0:v.project_logo)?null:ke(Se()+`assets/${n.settings.project_logo}`)}),s=y(!1),{queueHasItems:r}=re(t);K(()=>r.value,v=>{v&&(s.value=!0)});const i=V(()=>{var v;return(v=n.settings)==null?void 0:v.project_url}),o=V(()=>{var v;return((v=n.settings)==null?void 0:v.project_url)?e("view_project"):!1});return{customLogoPath:c,showLoader:s,stopSpinnerIfQueueIsEmpty:p,url:i,urlTooltip:o};function p(){r.value===!1&&(s.value=!1)}}}),vt=["src"];function pt(e,t,n,c,s,r){const i=l("v-progress-linear"),o=X("tooltip");return T((d(),$(ye(e.url?"a":"div"),{href:e.url,target:e.url?"_blank":void 0,rel:e.url?"noopener noreferrer":void 0,class:U(["module-bar-logo",{loading:e.showLoader}])},{default:u(()=>[e.customLogoPath?(d(),I(te,{key:0},[a(He,{name:"fade"},{default:u(()=>[e.showLoader?(d(),$(i,{key:0,indeterminate:"",rounded:"",onAnimationiteration:e.stopSpinnerIfQueueIsEmpty},null,8,["onAnimationiteration"])):j("",!0)]),_:1}),L("img",{class:"custom-logo",src:e.customLogoPath,alt:"Project Logo"},null,8,vt)],64)):(d(),I("div",{key:1,class:U(["logo",{running:e.showLoader}]),onAnimationiteration:t[0]||(t[0]=(...p)=>e.stopSpinnerIfQueueIsEmpty&&e.stopSpinnerIfQueueIsEmpty(...p))},null,34))]),_:1},8,["href","target","rel","class"])),[[o,e.urlTooltip,void 0,{right:!0}]])}var _t=E(dt,[["render",pt],["__scopeId","data-v-a98d38ac"]]);const ft=M({setup(){const{t:e}=W(),t=ue(),n=Z(),{notificationsDrawerOpen:c}=ie(t),{unread:s}=ie(n),r=ce(),i=y(!1),o=V(()=>{var k;return!r.currentUser||!("avatar"in r.currentUser)||!((k=r.currentUser)==null?void 0:k.avatar)?null:ke(Se()+`assets/${r.currentUser.avatar.id}?key=system-medium-cover`)}),p=y(null),v=V(()=>{var m;return`/users/${(m=r.currentUser)==null?void 0:m.id}`}),b=V(()=>"/logout"),_=r.fullName;return{t:e,userFullName:_,avatarURL:o,userProfileLink:v,signOutActive:i,signOutLink:b,notificationsDrawerOpen:c,unread:s,avatarError:p}}}),mt={class:"module-bar-avatar"},gt=["src","alt"];function yt(e,t,n,c,s,r){const i=l("v-icon"),o=l("v-button"),p=l("v-badge"),v=l("v-card-title"),b=l("v-card-actions"),_=l("v-card"),k=l("v-dialog"),m=l("v-avatar"),H=l("router-link"),D=l("v-hover"),C=X("tooltip");return d(),I("div",mt,[a(p,{value:e.unread,disabled:e.unread==0,class:"notifications-badge"},{default:u(()=>[T(a(o,{tile:"",icon:"","x-large":"",class:"notifications",onClick:t[0]||(t[0]=R=>e.notificationsDrawerOpen=!0)},{default:u(()=>[a(i,{name:"notifications"})]),_:1},512),[[C,e.t("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),a(D,null,{default:u(({hover:R})=>[a(k,{modelValue:e.signOutActive,"onUpdate:modelValue":t[2]||(t[2]=w=>e.signOutActive=w),onEsc:t[3]||(t[3]=w=>e.signOutActive=!1)},{activator:u(({on:w})=>[T(a(o,{tile:"",icon:"","x-large":"",class:U([{show:R},"sign-out"]),onClick:w},{default:u(()=>[a(i,{name:"logout"})]),_:2},1032,["class","onClick"]),[[C,e.t("sign_out"),void 0,{right:!0}]])]),default:u(()=>[a(_,null,{default:u(()=>[a(v,null,{default:u(()=>[B(N(e.t("sign_out_confirm")),1)]),_:1}),a(b,null,{default:u(()=>[a(o,{secondary:"",onClick:t[1]||(t[1]=w=>e.signOutActive=!e.signOutActive)},{default:u(()=>[B(N(e.t("cancel")),1)]),_:1}),a(o,{to:e.signOutLink},{default:u(()=>[B(N(e.t("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),a(H,{to:e.userProfileLink},{default:u(()=>[T(a(m,{tile:"",large:"",class:U({"no-avatar":!e.avatarURL})},{default:u(()=>[e.avatarURL&&!e.avatarError?(d(),I("img",{key:0,src:e.avatarURL,alt:e.userFullName,class:"avatar-image",onError:t[4]||(t[4]=w=>e.avatarError=w)},null,40,gt)):(d(),$(i,{key:1,name:"account_circle",outline:""}))]),_:1},8,["class"]),[[C,e.userFullName,void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}var $t=E(ft,[["render",yt],["__scopeId","data-v-5d79e330"]]);const bt=M({components:{ModuleBarLogo:_t,ModuleBarAvatar:$t},setup(){const e=we(),{modules:t}=tt(),n=V(()=>t.value.map(s=>s.id));return{modules:V(()=>{var s;return e.settings?((s=e.settings.module_bar)!=null?s:xe).filter(r=>r.type==="link"?!0:r.enabled&&n.value.includes(r.id)).map(r=>{if(r.type==="link"){const o=le.exports.omit(r,["url"]);return r.url.startsWith("/")?o.to=r.url:o.href=r.url,et(o)}const i=t.value.find(o=>o.id===r.id);return _e(se(se({},r),t.value.find(o=>o.id===r.id)),{to:`/${i.id}`})}):[]})}}}),ht={class:"module-bar"},wt={class:"modules"};function kt(e,t,n,c,s,r){const i=l("module-bar-logo"),o=l("v-icon"),p=l("v-button"),v=l("module-bar-avatar"),b=X("tooltip");return d(),I("div",ht,[a(i),L("div",wt,[(d(!0),I(te,null,ne(e.modules,_=>T((d(),$(p,{key:_.id,icon:"","x-large":"",to:_.to,href:_.href,tile:"",style:Te(_.color?{"--v-button-color-active":_.color}:null)},{default:u(()=>[a(o,{name:_.icon,outline:""},null,8,["name"])]),_:2},1032,["to","href","style"])),[[b,_.name,void 0,{right:!0}]])),128))]),a(v)])}var St=E(bt,[["render",kt],["__scopeId","data-v-56fd11d0"]]);const It=M({setup(){const{t:e}=W(),{parsedInfo:t}=nt(),n=Z(),c=ce(),s=V(()=>n.dialogs);return{t:e,notifications:s,admin:c.isAdmin,done:i,getGitHubIssueLink:r};function r(o,p){var b,_,k,m;const v=`<!-- Please put a detailed explanation of the problem here. -->

---

### Project details
Directus Version: ${(b=t.value)==null?void 0:b.directus.version}
Environment: production
OS: ${(_=t.value)==null?void 0:_.os.type} ${(k=t.value)==null?void 0:k.os.version}
Node: ${(m=t.value)==null?void 0:m.node.version}

### Error

Title: ${p.title||"none"}
Message: ${p.text||"none"}

<details>
<summary>Stack Trace</summary>
<pre>
${JSON.stringify(p.error,Object.getOwnPropertyNames(p.error),2)}
</pre>
</details>
			`;return`https://github.com/directus/directus/issues/new?body=${encodeURIComponent(v)}`}function i(o){n.remove(o)}}}),Vt={class:"notification-dialogs"},Ct=["href"];function Lt(e,t,n,c,s,r){const i=l("v-card-title"),o=l("v-error"),p=l("v-card-text"),v=l("v-button"),b=l("v-card-actions"),_=l("v-card"),k=l("v-dialog");return d(),I("div",Vt,[(d(!0),I(te,null,ne(e.notifications,m=>(d(),$(k,{key:m.id,"model-value":!0,persist:""},{default:u(()=>[a(_,{class:U([m.type])},{default:u(()=>[a(i,null,{default:u(()=>[B(N(m.title),1)]),_:2},1024),m.text?(d(),$(p,{key:0},{default:u(()=>[B(N(m.text)+" ",1),m.error?(d(),$(o,{key:0,error:m.error},null,8,["error"])):j("",!0)]),_:2},1024)):j("",!0),a(b,null,{default:u(()=>[m.type==="error"&&e.admin&&m.code==="UNKNOWN"?(d(),$(v,{key:0,secondary:""},{default:u(()=>[L("a",{target:"_blank",href:e.getGitHubIssueLink(m.id,m)},N(e.t("report_error")),9,Ct)]),_:2},1024)):j("",!0),a(v,{onClick:H=>e.done(m.id)},{default:u(()=>[B(N(e.t("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}var Nt=E(It,[["render",Lt],["__scopeId","data-v-bb61b36a"]]);const Ot=M({props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e){const{t}=W(),n=ue(),c=ce(),s=Z(),r=ot(),i=$e(),o=y([]),p=y(0),v=y(!1),b=y(null),_=y([]),k=y(["inbox"]),{notificationsDrawerOpen:m}=ie(n),H=y([{text:t("subject"),value:"subject",sortable:!1,width:300,align:"left"},{text:t("timestamp"),value:"timestampDistance",sortable:!1,width:180,align:"left"}]);return D(),K([()=>e.modelValue,k],()=>D()),{tableHeaders:H,t,notificationsDrawerOpen:m,page:p,notifications:o,loading:v,error:b,selection:_,onRowClick:R,toggleArchive:C,tab:k};async function D(){v.value=!0;try{const w=await Ie.get("/notifications",{params:{filter:{_and:[{recipient:{_eq:c.currentUser.id}},{status:{_eq:k.value[0]}}]},fields:["id","subject","collection","item","timestamp"],sort:["-timestamp"]}});await s.getUnreadCount();const F=w.data.data,q=[];for(const J of F)q.push(_e(se({},J),{timestampDistance:await at(Fe(J.timestamp),new Date,{addSuffix:!0})}));o.value=q}catch(w){b.value=w}finally{v.value=!1}}async function C(){await Ie.patch("/notifications",{keys:_.value.map(({id:w})=>w),data:{status:k.value[0]==="inbox"?"archived":"inbox"}}),await D(),_.value=[]}function R({item:w}){var q;const F=r.getCollection(w.collection);((q=F==null?void 0:F.meta)==null?void 0:q.singleton)?i.push(`/content/${w.collection}`):i.push(`/content/${w.collection}/${w.item}`),m.value=!1}}});function Dt(e,t,n,c,s,r){const i=l("v-icon"),o=l("v-button"),p=l("v-list-item-icon"),v=l("v-list-item-content"),b=l("v-tab"),_=l("v-tabs"),k=l("v-info"),m=l("v-table"),H=l("v-drawer"),D=X("tooltip");return d(),$(H,{modelValue:e.notificationsDrawerOpen,"onUpdate:modelValue":t[3]||(t[3]=C=>e.notificationsDrawerOpen=C),icon:"notifications",title:e.t("notifications"),onCancel:t[4]||(t[4]=C=>e.notificationsDrawerOpen=!1)},{actions:u(()=>[T(a(o,{icon:"",rounded:"",disabled:e.selection.length===0,secondary:"",onClick:e.toggleArchive},{default:u(()=>[a(i,{name:e.tab[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled","onClick"]),[[D,e.tab[0]==="inbox"?e.t("archive"):e.t("unarchive"),void 0,{bottom:!0}]])]),sidebar:u(()=>[a(_,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=C=>e.tab=C),vertical:""},{default:u(()=>[a(b,{value:"inbox"},{default:u(()=>[a(p,null,{default:u(()=>[a(i,{name:"inbox"})]),_:1}),a(v,null,{default:u(()=>[B(N(e.t("inbox")),1)]),_:1})]),_:1}),a(b,{value:"archived"},{default:u(()=>[a(p,null,{default:u(()=>[a(i,{name:"archive"})]),_:1}),a(v,null,{default:u(()=>[B(N(e.t("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:u(()=>[!e.loading&&e.notifications.length===0?(d(),$(k,{key:0,icon:"notifications",title:e.t("no_notifications"),center:""},{default:u(()=>[B(N(e.t("no_notifications_copy")),1)]),_:1},8,["title"])):(d(),$(m,{key:1,modelValue:e.selection,"onUpdate:modelValue":t[1]||(t[1]=C=>e.selection=C),headers:e.tableHeaders,"onUpdate:headers":t[2]||(t[2]=C=>e.tableHeaders=C),"show-select":"",loading:e.loading,items:e.notifications,"item-key":"id","onClick:row":e.onRowClick},null,8,["modelValue","headers","loading","items","onClick:row"]))]),_:1},8,["modelValue","title"])}var Mt=E(Ot,[["render",Dt],["__scopeId","data-v-2e8d7f71"]]);const Ut=M({props:{id:{type:String,required:!0},title:{type:String,required:!0},text:{type:String,default:null},icon:{type:String,default:null},type:{type:String,default:"info",validator:e=>["info","success","warning","error"].includes(e)},tail:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},progress:{type:Number,default:void 0}},setup(e){const t=Z();return{close:n};function n(){e.showClose===!0&&t.remove(e.id)}}}),Bt={key:0,class:"icon"},Et={class:"content"},At={class:"title selectable"},jt={key:0,class:"text selectable"};function Rt(e,t,n,c,s,r){const i=l("v-progress-circular"),o=l("v-icon");return d(),I("div",{class:U(["notification-item",[e.type,{tail:e.tail,dense:e.dense}]]),onClick:t[0]||(t[0]=(...p)=>e.close&&e.close(...p))},[e.loading||e.progress||e.icon?(d(),I("div",Bt,[e.loading?(d(),$(i,{key:0,indeterminate:"",small:""})):e.progress?(d(),$(i,{key:1,small:"",value:e.progress},null,8,["value"])):(d(),$(o,{key:2,name:e.icon},null,8,["name"]))])):j("",!0),L("div",Et,[L("p",At,N(e.title),1),e.text?(d(),I("p",jt,N(e.text),1)):j("",!0)]),e.showClose?(d(),$(o,{key:1,name:"close",clickable:"",class:"close",onClick:e.close},null,8,["onClick"])):j("",!0)],2)}var Le=E(Ut,[["render",Rt],["__scopeId","data-v-43553e80"]]);const Pt=M({components:{NotificationItem:Le},props:{sidebarOpen:{type:Boolean,default:!1}},setup(){const e=Z();return{queue:re(e).queue}}});function Ht(e,t,n,c,s,r){const i=l("notification-item");return d(),$(he,{class:U(["notifications-group",{"sidebar-open":e.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:u(()=>[z(e.$slots,"default",{},void 0,!0),(d(!0),I(te,null,ne(e.queue,(o,p)=>(d(),$(i,be({key:o.id},o,{tail:p===e.queue.length-1,dense:e.sidebarOpen===!1,"show-close":o.persist===!0&&o.closeable!==!1}),null,16,["tail","dense","show-close"]))),128))]),_:3},8,["class"])}var Tt=E(Pt,[["render",Ht],["__scopeId","data-v-509bd4b0"]]);const Ft=M({props:{to:{type:String,default:null},icon:{type:String,default:"box"},active:{type:Boolean,default:!1}},emits:["click"],setup(){const e=ue(),{sidebarOpen:t}=re(e);return{sidebarOpen:t}}}),qt={class:"icon"},Wt={key:0,class:"title"};function zt(e,t,n,c,s,r){const i=l("v-icon");return d(),$(ye(e.to?"router-link":"button"),{class:U(["sidebar-button",{active:e.active}]),onClick:t[0]||(t[0]=o=>e.$emit("click",o))},{default:u(()=>[L("div",qt,[a(i,{name:e.icon,outline:""},null,8,["name"])]),e.sidebarOpen?(d(),I("div",Wt,[z(e.$slots,"default",{},void 0,!0)])):j("",!0)]),_:3},8,["class"])}var Gt=E(Ft,[["render",zt],["__scopeId","data-v-3f4d4d50"]]);const Jt=M({components:{SidebarButton:Gt,NotificationItem:Le},props:{sidebarOpen:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(){const{t:e}=W(),t=Z();return{t:e,lastFour:t.lastFour}}}),Qt={class:"notifications-preview"},Kt={key:0,class:"inline"},Xt={class:"padding-box"};function Zt(e,t,n,c,s,r){const i=l("router-link"),o=l("notification-item"),p=l("transition-expand"),v=l("sidebar-button"),b=X("tooltip");return d(),I("div",Qt,[a(p,{tag:"div"},{default:u(()=>[e.modelValue?(d(),I("div",Kt,[L("div",Xt,[a(i,{class:U(["link",{"has-items":e.lastFour.length>0}]),to:"/activity"},{default:u(()=>[B(N(e.t("show_all_activity")),1)]),_:1},8,["class"]),a(he,{tag:"div",name:"notification",class:"transition"},{default:u(()=>[(d(!0),I(te,null,ne(e.lastFour,_=>(d(),$(o,be({key:_.id},_),null,16))),128))]),_:1})])])):j("",!0)]),_:1}),T(a(v,{active:e.modelValue,class:"toggle",icon:"pending_actions",onClick:t[0]||(t[0]=_=>e.$emit("update:modelValue",!e.modelValue))},{default:u(()=>[B(N(e.t("activity_log")),1)]),_:1},8,["active"]),[[b,e.t("activity_log"),void 0,{left:!0}]])])}var Yt=E(Jt,[["render",Zt],["__scopeId","data-v-415ab206"]]),Y=1e3,x=Y*60,ee=x*60,G=ee*24,xt=G*7,en=G*365.25,de=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return tn(e);if(n==="number"&&isFinite(e))return t.long?on(e):nn(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function tn(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var n=parseFloat(t[1]),c=(t[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return n*en;case"weeks":case"week":case"w":return n*xt;case"days":case"day":case"d":return n*G;case"hours":case"hour":case"hrs":case"hr":case"h":return n*ee;case"minutes":case"minute":case"mins":case"min":case"m":return n*x;case"seconds":case"second":case"secs":case"sec":case"s":return n*Y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function nn(e){var t=Math.abs(e);return t>=G?Math.round(e/G)+"d":t>=ee?Math.round(e/ee)+"h":t>=x?Math.round(e/x)+"m":t>=Y?Math.round(e/Y)+"s":e+"ms"}function on(e){var t=Math.abs(e);return t>=G?ve(e,t,G,"day"):t>=ee?ve(e,t,ee,"hour"):t>=x?ve(e,t,x,"minute"):t>=Y?ve(e,t,Y,"second"):e+" ms"}function ve(e,t,n,c){var s=t>=n*1.5;return Math.round(e/n)+" "+c+(s?"s":"")}const an=M({setup(){const{t:e}=W(),t=st(),n=V(()=>{const o=le.exports.sortBy(t.latency,["timestamp"]);return o[o.length-1]}),c=V(()=>{if(!t.latency||t.latency.length===0)return 0;const o=le.exports.sortBy(t.latency,["timestamp"]),p=o.slice(Math.max(o.length-5,0));let v=0;for(const{latency:b}of p)v+=b;return Math.round(v/p.length)}),s=V(()=>c.value<=250?4:c.value>250&&c.value<=500?3:c.value>500&&c.value<=750?2:1),r=V(()=>{switch(s.value){case 4:return`${e("connection_excellent")}
(${de(c.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${de(c.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${de(c.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${de(c.value)} ${e("latency")})`;default:return null}});return{icon:V(()=>{switch(s.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}}),lastLatency:n,latencyTooltip:r}}}),sn={class:"latency-indicator"};function rn(e,t,n,c,s,r){const i=l("v-progress-circular"),o=l("v-icon"),p=X("tooltip");return T((d(),I("div",sn,[e.lastLatency?(d(),$(o,{key:1,name:e.icon},null,8,["name"])):(d(),$(i,{key:0,indeterminate:""}))],512)),[[p,e.latencyTooltip,void 0,{bottom:!0,end:!0}]])}var ln=E(an,[["render",rn],["__scopeId","data-v-2cfd5c8b"]]);const un=M({components:{LatencyIndicator:ln},setup(){const e=rt(),t=V(()=>{var c,s;return(s=(c=e.info)==null?void 0:c.project)==null?void 0:s.project_name}),n=V(()=>{var c,s;return(s=(c=e.info)==null?void 0:c.project)==null?void 0:s.project_descriptor});return{name:t,descriptor:n}}}),cn={class:"project-info"},dn={class:"name-container"};function vn(e,t,n,c,s,r){const i=l("latency-indicator"),o=l("v-text-overflow");return d(),I("div",cn,[a(i),L("div",dn,[a(o,{placement:"right",class:"name",text:e.name},null,8,["text"]),e.descriptor?(d(),$(o,{key:0,placement:"right",class:"descriptor",text:e.descriptor},null,8,["text"])):j("",!0)])])}var pn=E(un,[["render",vn],["__scopeId","data-v-47e3c683"]]);const _n=M({props:{sidebarOpen:{type:Boolean,default:!1}},setup(e){const t=y([]),n=y(!1);return K(()=>e.sidebarOpen,async c=>{c===!1?t.value=[]:(n.value=!0,await qe(),n.value=!1)}),{openDetail:t,mandatory:n}}});function fn(e,t,n,c,s,r){const i=l("v-item-group");return d(),$(i,{modelValue:e.openDetail,"onUpdate:modelValue":t[0]||(t[0]=o=>e.openDetail=o),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:e.mandatory},{default:u(()=>[z(e.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}var mn=E(_n,[["render",fn],["__scopeId","data-v-ebb6371e"]]);const gn=e=>(Xe("data-v-8096cf9e"),e=e(),Ze(),e),yn={class:"module-nav-content"},$n={class:"flex-container"},bn=gn(()=>L("div",{class:"spacer"},null,-1)),hn=M({props:{title:{default:null},smallHeader:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=W(),c=$e(),s=y(),r=y(),{width:i}=it(),{width:o}=Ve(s),{width:p}=Ve(r),v=y(),{handleHover:b,onResizeHandlePointerDown:_,resetModuleNavWidth:k,onPointerMove:m,onPointerUp:H}=Oe();Ce(window,"pointermove",m),Ce(window,"pointerup",H);const{data:D}=ct("module-nav-width");We(()=>{!D.value||Number.isNaN(D.value)||(v.value.style.width=`${D.value}px`)});const{title:C}=re(t),R=y(!1),w=ce(),F=ue(),q=V(()=>{var S,g;return w.currentUser?((g=(S=w.currentUser)==null?void 0:S.role)==null?void 0:g.app_access)||!1:!0}),J=y(!1),{sidebarOpen:P,fullScreen:fe}=ie(F),Ne=V(()=>{var S;return((S=w.currentUser)==null?void 0:S.theme)||"auto"});ze("main-element",s),c.afterEach(async()=>{var S;(S=s.value)==null||S.scrollTo({top:0}),fe.value=!1}),lt(C);function Oe(){const S=y(!1),g=y(!1),oe=y(0),ae=y(0),O=y(null),f=y(0),A=y(null);return K(O,le.exports.debounce(Q=>{Q===220?D.value=null:D.value=Q},300)),K([i,o,p],()=>{i.value>1260?f.value=i.value-(590+60+p.value):i.value>960?f.value=i.value-(590+60+60):f.value=i.value-(60+60),O.value&&O.value>f.value&&(O.value=Math.max(220,f.value),v.value.style.width=`${O.value}px`)},{immediate:!0}),{handleHover:S,onResizeHandlePointerDown:pe,resetModuleNavWidth:Me,onPointerMove:Ue,onPointerUp:Be};function pe(Q){g.value=!0,oe.value=Q.pageX,ae.value=v.value.offsetWidth}function Me(){v.value.style.width="220px"}function Ue(Q){!g.value||(A.value=window.requestAnimationFrame(()=>{O.value=Math.max(220,ae.value+(Q.pageX-oe.value)),O.value>=f.value&&(O.value=f.value),O.value>220&&O.value<=230&&(O.value=220),v.value.style.width=`${O.value}px`}))}function Be(){g.value===!0&&(g.value=!1,A.value&&window.cancelAnimationFrame(A.value))}}function De(S){S.target&&S.target.classList.contains("close")===!1&&(P.value=!0)}return(S,g)=>{const oe=l("v-button"),ae=l("v-info"),O=l("v-overlay");return h(q)===!1?(d(),$(ae,{key:0,center:"",title:h(n)("no_app_access"),type:"danger",icon:"block"},{append:u(()=>[a(oe,{to:"/logout"},{default:u(()=>[B(N(h(n)("switch_user")),1)]),_:1})]),default:u(()=>[B(N(h(n)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(d(),I("div",{key:1,class:U(["private-view",{theme:h(Ne),"full-screen":h(fe)}])},[L("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:U({"is-open":R.value})},[a(St),L("div",{ref:(f,A)=>{A.moduleNavEl=f,v.value=f},class:"module-nav alt-colors"},[a(h(pn)),L("div",yn,[z(S.$slots,"navigation",{},void 0,!0)]),L("div",{class:U(["module-nav-resize-handle",{active:h(b)}]),onPointerenter:g[0]||(g[0]=f=>b.value=!0),onPointerleave:g[1]||(g[1]=f=>b.value=!1),onPointerdown:g[2]||(g[2]=Ge((...f)=>h(_)&&h(_)(...f),["self"])),onDblclick:g[3]||(g[3]=(...f)=>h(k)&&h(k)(...f))},null,34)],512)],2),L("div",{id:"main-content",ref:(f,A)=>{A.contentEl=f,s.value=f},class:"content"},[a(h(ut),{small:e.smallHeader,"show-sidebar-toggle":"",title:h(C),"onToggle:sidebar":g[4]||(g[4]=f=>P.value=!h(P)),onPrimary:g[5]||(g[5]=f=>R.value=!R.value)},Je({_:2},[ne(S.$slots,(f,A)=>({name:A,fn:u(pe=>[z(S.$slots,A,Qe(Ke(pe)),void 0,!0)])}))]),1032,["small","title"]),L("main",null,[z(S.$slots,"default",{},void 0,!0)])],512),L("aside",{id:"sidebar",ref:(f,A)=>{A.sidebarEl=f,r.value=f},role:"contentinfo",class:U(["alt-colors",{"is-open":h(P)}]),"aria-label":"Module Sidebar",onClick:De},[L("div",$n,[a(h(mn),{"sidebar-open":h(P)},{default:u(()=>[z(S.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),bn,a(h(Yt),{modelValue:J.value,"onUpdate:modelValue":g[6]||(g[6]=f=>J.value=f),"sidebar-open":h(P)},null,8,["modelValue","sidebar-open"])])],2),a(O,{class:"nav-overlay",active:R.value,onClick:g[7]||(g[7]=f=>R.value=!1)},null,8,["active"]),a(O,{class:"sidebar-overlay",active:h(P),onClick:g[8]||(g[8]=f=>P.value=!1)},null,8,["active"]),a(Mt),J.value===!1?(d(),$(h(Tt),{key:0,"sidebar-open":h(P)},null,8,["sidebar-open"])):j("",!0),a(h(Nt))],2))}}});var Vn=E(hn,[["__scopeId","data-v-8096cf9e"]]);export{Vn as PrivateView,Vn as default};
