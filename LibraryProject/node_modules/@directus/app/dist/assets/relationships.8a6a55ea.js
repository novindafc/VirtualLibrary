import{r as s,p as c,q as d,w as n,z as e,t as l,S as t}from"./vendor.546e1516.js";const h={class:"markdown-body"},u=e("blockquote",null,[e("p",null,[t("As you might have guessed, relationships are a crucial part of any relational database. Directus supports all standard relationship types, as well as a few more "),e("em",null,"compound"),t(" types that offer greater flexibility.")])],-1),f=e("p",null,[e("div",{class:"table-of-contents"},[e("ul",null,[e("li",null,[e("a",{href:"#many-to-one-(m2o)"},"Many-to-One (M2O)")]),e("li",null,[e("a",{href:"#one-to-many-(o2m)"},"One-to-Many (O2M)")]),e("li",null,[e("a",{href:"#translations-(o2m)"},"Translations (O2M)")]),e("li",null,[e("a",{href:"#many-to-many-(m2m)"},"Many-to-Many (M2M)")]),e("li",null,[e("a",{href:"#many-to-any-(m2a)"},"Many-to-Any (M2A)")]),e("li",null,[e("a",{href:"#one-to-one-(o2o)"},"One-to-One (O2O)")])])])],-1),p=e("h3",{id:"introduction"},[t("Introduction "),e("a",{class:"header-anchor",href:"#introduction"},"#")],-1),m=e("p",null,"While it may seem complex at first, relational data is actually quite straightforward once you understand what\u2019s happening behind the sometimes confusing terminology. Before diving into the details of each type, let\u2019s first cover a few basics that will help you better visualize them in your mind\u2019s eye.",-1),_=e("h3",{id:"primary-and-foreign-keys"},[t("Primary and Foreign Keys "),e("a",{class:"header-anchor",href:"#primary-and-foreign-keys"},"#")],-1),y=t("Every "),g=t("Item"),w=t(" in a relational database has a unique "),M=t("Primary Key"),b=t(" (or \u201CPK\u201D) that identifies it within its "),v=t("Collection"),O=t(". Because it\u2019s required, the key is the first "),k=t("field"),T=t(" created within a collection, typically storing an \u201Cauto-increment\u201D number, an automatically generated unique hash, or a manually entered value. They are often abbreviated to \u201CPK\u201D (Primary Key), \u201CID\u201D (Identifier), \u201CUID\u201D (Unique Identifier), or \u201CUUID\u201D (Universally Unique Identifier), depending on the type of value they store. After it\u2019s created, the value of an item\u2019s PK should "),C=e("em",null,"never",-1),x=t(" change."),A=e("p",null,[t("To link items together relationally, you simply save a reference to an item\u2019s PK in a different field. That "),e("em",null,"reference"),t(" is called a Foreign Key (FK). If the primary key is a "),e("em",null,"person"),t(", the foreign key is like their "),e("em",null,"business card"),t(". It references the actual person, providing just enough information to find them.")],-1),j=e("div",{class:"tip hint"},[e("div",{class:"hint-title"},"Composite & Compound Keys"),e("p",null,[t("In the above explanation we\u2019ve ignored "),e("em",null,"composite"),t(" and "),e("em",null,"compound"),t(" keys, which are essentially unique keys created by combining "),e("em",null,"multiple"),t(" field/column values.")])],-1),I=e("h3",{id:"perspective-matters"},[t("Perspective Matters "),e("a",{class:"header-anchor",href:"#perspective-matters"},"#")],-1),P=e("p",null,"Just like primary and foreign keys, relationships are always described relative to their \u201Cparent\u201D collection. Looking at the same relationship/key from the perspective of the opposite collection would reverse it. This means that a many-to-one relationship can also be seen as a one-to-many relationship, it just depends on which collection is considered the parent.",-1),D=e("h2",{id:"many-to-one-(m2o)"},[t("Many-to-One (M2O) "),e("a",{class:"header-anchor",href:"#many-to-one-(m2o)"},"#")],-1),S=e("p",null,[t("The Many-to-One is the only relationship type with an actual field on the parent Collection. This field saves the foreign key to a single related item. For example, a "),e("em",null,"city"),t(" can only be in one "),e("em",null,"country"),t(", but a "),e("em",null,"country"),t(" can have many "),e("em",null,"cities"),t(".")],-1),F=e("p",null,"Below is an example of a M2O relationship:",-1),R=e("pre",null,[e("code",null,`cities (the "Many" Collection)
- id (Primary Key)
- name
- country (the M2O field that stores the country key)

countries (the "One" Collection)
- id (Primary Key)
- name
`)],-1),K=e("h3",{id:"setup"},[t("Setup "),e("a",{class:"header-anchor",href:"#setup"},"#")],-1),q=e("p",null,[e("img",{src:"https://cdn.directus.io/docs/v9/configuration/data-model/relationships/M2O-20220216A.webp",alt:"M2O"})],-1),N=e("p",null,"The parent collection and field are already known (it\u2019s the field you\u2019re currently creating), so configuring those are disabled. All you need to configure is the related collection and its primary key field.",-1),J=e("p",null,[t("If you select or enter an "),e("strong",null,"existing"),t(" Related Collection (highlights green) then the primary key field is known and automatically selected. If you enter the name of a "),e("strong",null,"new"),t(" Related Collection (doesn\u2019t already exist), you will also be prompted to enter the name of its primary key field, which will default to an auto-increment integer type.")],-1),W=e("p",null,[t("You also have the option to create a "),e("strong",null,"Corresponding Field"),t(" during this process. This allows you to more easily create the O2M alias (see below) that pairs with this M2O.")],-1),B=e("p",null,[e("strong",null,"Relational Triggers"),t(" allow for control over what happens when a relationship is broken. There is one option:")],-1),Y=e("ul",null,[e("li",null,[e("strong",null,"On Delete of [Related Collection]"),t(" \u2014 When the related item (O2M) is deleted\u2026 "),e("ul",null,[e("li",null,"Nullify the parent M2O field (default)"),e("li",null,"Set the parent M2O field to its default value"),e("li",null,"Delete the parent collection\u2019s item (cascade)"),e("li",null,"Prevent the deletion")])])],-1),U=e("h2",{id:"one-to-many-(o2m)"},[t("One-to-Many (O2M) "),e("a",{class:"header-anchor",href:"#one-to-many-(o2m)"},"#")],-1),L=t("The One-to-Many relationship is the "),z=e("strong",null,"exact same relationship",-1),E=t(" as a Many-to-One (above), just seen from the opposite collection\u2019s perspective. The O2M is stored as an "),H=t("Alias"),V=t(" field on its parent Collection that dynamically lists all items connected via the opposite Many-to-One. So, while the M2O will show a single country for the parent city, the O2M shows all cities for the parent country."),G=e("p",null,"Below is an example of a O2M relationship:",-1),Q=e("pre",null,[e("code",null,`countries (the "One" Collection)
- id (Primary Key)
- name
- *cities* (the O2M alias field that lists references from "cities.country")

cities (the "Many" Collection)
- id (Primary Key)
- name
- country (the M2O field that stores the country key)
`)],-1),X=e("h3",{id:"setup-2"},[t("Setup "),e("a",{class:"header-anchor",href:"#setup-2"},"#")],-1),Z=e("p",null,[e("img",{src:"https://cdn.directus.io/docs/v9/configuration/data-model/relationships/O2M-20220216A.webp",alt:"O2M"})],-1),$=e("p",null,"The parent collection and field are already known (it\u2019s the field you\u2019re currently creating), so configuring those are disabled. All you need to configure is the related collection and its M2O field.",-1),ee=e("p",null,[t("You can select or enter an "),e("strong",null,"existing"),t(" Related Collection (highlights green) or create a "),e("strong",null,"new"),t(" one by entering a unique collection name. Next, you can select an existing field (highlights green) or create a new one by entering a field name unique to its collection.")],-1),te=e("p",null,"The related field will store the value of this collection\u2019s primary key field, so both must have the same type. For this reason, when selecting existing fields, options will be disabled if they don\u2019t have a matching type.",-1),ne=e("p",null,[t("You also have the option to create a "),e("strong",null,"Corresponding Field"),t(" during this process. This allows you to more easily create the M2O field (see above) that pairs with this O2M.")],-1),oe=e("p",null,[t("The optional "),e("strong",null,"Sort Field"),t(" can be used to enable manual reordering of items within this O2M field. This is configured by selecting an existing numeric type field (highlights green) from the Related Collection, or entering the name of a new field to be created.")],-1),le=e("p",null,[e("strong",null,"Relational Triggers"),t(" allow for control over what happens when a relationship is broken. There are two options:")],-1),ie=e("ul",null,[e("li",null,[e("strong",null,"On Deselect of [Related Collection]"),t(" \u2014 When the value of the M2O is deselected\u2026 "),e("ul",null,[e("li",null,"Nullify the M2O field value (default)"),e("li",null,"Delete the M2O item (cascade)")])]),e("li",null,[e("strong",null,"On Delete of [Parent Collection Item]"),t(" \u2014 When this O2M item is deleted\u2026 "),e("ul",null,[e("li",null,"Nullify the related M2O field (default)"),e("li",null,"Set the related M2O field to its default value"),e("li",null,"Delete the related collection\u2019s item (cascade)"),e("li",null,"Prevent the deletion")])])],-1),se=e("h2",{id:"translations-(o2m)"},[t("Translations (O2M) "),e("a",{class:"header-anchor",href:"#translations-(o2m)"},"#")],-1),ae=t("The Translations relationship is just a special version of the standard O2M. Just like the O2M, it creates an "),re=t("Alias"),ce=t(" field that is used to list all related items (the translations). Translations themselves are stored in a separate collection, which is then further related to a "),de=e("em",null,"third",-1),he=t(" collection that stores all languages."),ue=e("h3",{id:"setup-3"},[t("Setup "),e("a",{class:"header-anchor",href:"#setup-3"},"#")],-1),fe=e("p",null,[e("img",{src:"https://cdn.directus.io/docs/v9/configuration/data-model/relationships/translations-wizard-20220216A.webp",alt:"Translations"})],-1),pe=e("p",null,"The easiest way to add translations is to use the wizard, which only asks for the Translation field name. All required fields and relationships will then be automatically created and configured.",-1),me=e("p",null,[e("img",{src:"https://cdn.directus.io/docs/v9/configuration/data-model/relationships/translations-relations-20220216A.webp",alt:"Translations"})],-1),_e=e("p",null,[t("If you choose to switch to "),e("strong",null,"manual setup"),t(", you will be presented with a similar relationship setup to O2M or M2M. The parent collection and primary key are known, so those fields are disabled.")],-1),ye=e("p",null,"Next, we configure the Translation Collection. Set to \u201CAuto Fill\u201D by default, this will enter intelligent naming based on related names, and disables all fields. Disabling Auto Fill will enable all fields, allowing you to name the collection that holds the translations, as well as the two fields (each a M2O) that store foreign keys to the parent item and language.",-1),ge=e("p",null,[t("Lastly, you would select/create the Languages collection, which stores the languages available for this translations field. It is common practice to reuse a single languages collection throughout your project, unless translation fields need to support different language sets. For the language "),e("code",null,"code"),t(" we recommend using the IETF language tag (eg: "),e("code",null,"en-US"),t(") which combines the ISO 639-1 and ISO 3166\u20111 standards, but anything can be used (eg: "),e("code",null,"english"),t(").")],-1),we=e("h2",{id:"many-to-many-(m2m)"},[t("Many-to-Many (M2M) "),e("a",{class:"header-anchor",href:"#many-to-many-(m2m)"},"#")],-1),Me=t("The Many-to-Many relationship is actually just "),be=e("strong",null,"two relationships combined",-1),ve=t(" (O2M+M2O) that join together three different collections. The M2M is stored as an "),Oe=t("Alias"),ke=t(" field on its parent Collection that dynamically lists all items connected via a "),Te=t("junction collection"),Ce=t(". For example, a "),xe=e("em",null,"recipe",-1),Ae=t(" can have many "),je=e("em",null,"ingredients",-1),Ie=t(", and "),Pe=e("em",null,"ingredients",-1),De=t(" can be in many "),Se=e("em",null,"recipes",-1),Fe=t("."),Re=e("p",null,"Below is an example of a M2M relationship:",-1),Ke=e("pre",null,[e("code",null,`recipes (Collection)
- id (Primary Key)
- name
- *ingredients* (M2M/O2M alias field that lists references from "recipe_ingredients")

ingredients (Collection)
- id (Primary Key)
- name
- *recipes* (M2M/O2M alias field that lists references from "recipe_ingredients")

recipe_ingredients (Junction Collection)
- id (Primary Key)
- recipe (stores the recipe key)
- ingredient (stores ingredient key)
- quantity (other optional data on the connection)
`)],-1),qe=e("p",null,[t("Notice that the example above also has a "),e("code",null,"quantity"),t(" field on the Junction Collection, which tracks how much of each ingredient is needed for the recipe. You can add any other "),e("em",null,"contextual"),t(" fields to the junction, and they will also be included at the top of the App\u2019s relational Item Page form.")],-1),Ne=e("div",{class:"tip hint"},[e("div",{class:"hint-title"},"Self-Referencing"),e("p",null,[t("You can also have a M2M relationship that connects items within the "),e("em",null,"same"),t(" collection. An example of this is \u201CRelated Articles\u201D, where an article might relate to many other articles.")])],-1),Je=e("h3",{id:"setup-4"},[t("Setup "),e("a",{class:"header-anchor",href:"#setup-4"},"#")],-1),We=e("p",null,[e("img",{src:"https://cdn.directus.io/docs/v9/configuration/data-model/relationships/M2M-20220216A.webp",alt:"M2M"})],-1),Be=e("p",null,"The parent collection and field are already known (it\u2019s the field you\u2019re currently creating), so configuring those are disabled.",-1),Ye=e("p",null,[t("Next you should configure the Related Collection. If you select or enter an "),e("strong",null,"existing"),t(" Related Collection (highlights green) then the primary key field is known and automatically selected. If you enter the name of a "),e("strong",null,"new"),t(" Related Collection (doesn\u2019t already exist), you will also be prompted to enter the name of its primary key field, which will default to an auto-increment integer type.")],-1),Ue=t("Lastly, we configure the "),Le=t("Junction Collection"),ze=t(", which sits between the two related collections, storing all links between the two. You can leave this set to \u201CAuto-Fill\u201D, which sets intelligent naming defaults, or disable it to select existing options or enter custom names."),Ee=e("p",null,[t("You also have the option to create a "),e("strong",null,"Corresponding Field"),t(" during this process. This allows you to more easily create the reverse M2M field on the "),e("em",null,"related"),t(" collection.")],-1),He=e("p",null,[t("The optional "),e("strong",null,"Sort Field"),t(" can be used to enable manual reordering of items within this O2M field. This is configured by selecting an existing numeric type field (highlights green) from the Junction Collection, or entering the name of a new field to be created.")],-1),Ve=e("p",null,[e("strong",null,"Relational Triggers"),t(" allow for control over what happens when a relationship is broken. There are three options:")],-1),Ge=e("ul",null,[e("li",null,[e("strong",null,"On Deselect of [Junction Collection]"),t(" \u2014 When the value of this M2M is deselected\u2026 "),e("ul",null,[e("li",null,"Nullify the junction field (default)"),e("li",null,"Delete the junction item (cascade)")])]),e("li",null,[e("strong",null,"On Delete of [Parent Collection Item]"),t(" \u2014 When this M2M item is deleted\u2026 "),e("ul",null,[e("li",null,"Nullify the junction field (default)"),e("li",null,"Set the junction field to its default value"),e("li",null,"Delete the related junction item (cascade)"),e("li",null,"Prevent the deletion")])]),e("li",null,[e("strong",null,"On Delete of [Related Collection Item]"),t(" \u2014 When the related M2M item is deleted\u2026 "),e("ul",null,[e("li",null,"Nullify the junction field (default)"),e("li",null,"Set the junction field to its default value"),e("li",null,"Delete the related junction item (cascade)"),e("li",null,"Prevent the deletion")])])],-1),Qe=e("h2",{id:"many-to-any-(m2a)"},[t("Many-to-Any (M2A) "),e("a",{class:"header-anchor",href:"#many-to-any-(m2a)"},"#")],-1),Xe=t("Sometimes called a \u201Cmatrix field\u201D or \u201Creplicator\u201D. Like the M2M, the M2A is stored as an "),Ze=t("Alias"),$e=t(" field on its parent Collection that dynamically lists all items connected via a "),et=t("junction collection"),tt=t(". However, there is one key difference: one side of the junction also stores a "),nt=e("strong",null,"collection key",-1),ot=t(". This combination of collection name and primary key means that you can effectively store a reference to "),lt=e("em",null,"any",-1),it=t(" item in the database. You can then artificially limit which collections are valid through a related collections \u201Callow list\u201D."),st=e("p",null,[t("A common example of a M2A is a \u201CPage Builder\u201D, which has a "),e("em",null,"Pages"),t(" collection that includes any number of different \u201Csection\u201D Collections, such as: \u201CHeading\u201D, \u201CText\u201D, and \u201CImage\u201D. In this example the junction table will link different sections (from different collections) with a page, creating relational layouts.")],-1),at=e("p",null,"Below is an example of a M2A relationship:",-1),rt=e("pre",null,[e("code",null,`pages (Collection)
- id
- name
- *sections* (O2M/M2A alias field that lists references from "page_sections")

page_sections (Junction Collection)
- id
- pages_id (stores the primary key of the parent page)
- collection (stores name of the related collection, for example "headings", "text", or "images")
- item (stores the primary key of the related item)

headings (Collection)
- id
- title

text (Collection)
- id
- text

images (Collection)
- id
- file
`)],-1),ct=e("h3",{id:"setup-5"},[t("Setup "),e("a",{class:"header-anchor",href:"#setup-5"},"#")],-1),dt=e("p",null,[e("img",{src:"https://cdn.directus.io/docs/v9/configuration/data-model/relationships/M2A-20220216A.webp",alt:"M2A"})],-1),ht=e("p",null,"The parent collection and field are already known (it\u2019s the field you\u2019re currently creating), so configuring those are disabled.",-1),ut=t("Next, we configure the "),ft=t("Junction Collection"),pt=t(", which sits between the related collections, storing all links between them. You can leave this set to \u201CAuto-Fill\u201D, which sets intelligent naming defaults, or disable it to select existing options or enter custom names."),mt=e("p",null,[t("Lastly, you should select any desired Related Collections. Unlike other relationships, you can\u2019t "),e("em",null,"create"),t(" these related collections here, so ensure all related collections you need are created beforehand.")],-1),_t=e("div",{class:"tip hint"},[e("div",{class:"hint-title"},"Auto-generating"),e("p",null,"If you enter a collection/field name that doesn\u2019t exist yet, Directus will auto-generate these collections/fields once you save the changes on the new M2A field.")],-1),yt=e("p",null,[t("The optional "),e("strong",null,"Sort Field"),t(" can be used to enable manual reordering of items within this M2A field. This is configured by selecting an existing numeric type field (highlights green) from the Junction Collection, or entering the name of a new field to be created.")],-1),gt=e("p",null,[e("strong",null,"Relational Triggers"),t(" allow for control over what happens when a relationship is broken. There are three options:")],-1),wt=e("ul",null,[e("li",null,[e("strong",null,"On Delete of [Parent Collection Item]"),t(" \u2014 When a M2A item is deleted\u2026 "),e("ul",null,[e("li",null,"Nullify the junction field (default)"),e("li",null,"Set the junction field to its default value"),e("li",null,"Delete the related junction item (cascade)"),e("li",null,"Prevent the deletion")])]),e("li",null,[e("strong",null,"On Deselect of [Junction Collection]"),t(" \u2014 When the value of this M2A is deselected\u2026 "),e("ul",null,[e("li",null,"Nullify the junction field (default)"),e("li",null,"Delete the junction item (cascade)")])])],-1),Mt=e("h2",{id:"one-to-one-(o2o)"},[t("One-to-One (O2O) "),e("a",{class:"header-anchor",href:"#one-to-one-(o2o)"},"#")],-1),bt=t("Directus does not include a dedicated One-to-One (O2O) relationship type or interface. However, O2O is essentially the same as a M2O (storing a foreign key). The only difference is that a O2O enforces the cardinality. In other words, selecting a relational item in a O2O means that item can not be selected elsewhere (it can only be used once). This functionality can be added by checking and constraining uniqueness via a "),vt=t("custom event hook"),Ot=t(" or "),kt=t("custom interface"),Tt=t("."),Ct=e("p",null,[t("An example of this is a "),e("em",null,"person"),t(" only has one unique set of "),e("em",null,"fingerprints"),t(", and those "),e("em",null,"fingerprints"),t(" only belong to one "),e("em",null,"person"),t(".")],-1),Pt={setup(xt,{expose:a}){const i={title:"Relationships",modularExtension:!1};return a({frontmatter:i}),(At,jt)=>{const o=s("router-link"),r=s("DocsWrapper");return c(),d(r,{frontmatter:i},{default:n(()=>[e("div",h,[u,f,p,m,_,e("p",null,[y,l(o,{to:"/docs/getting-started/glossary/#items"},{default:n(()=>[g]),_:1}),w,l(o,{to:"/docs/getting-started/glossary/#primary-key-pk"},{default:n(()=>[M]),_:1}),b,l(o,{to:"/docs/getting-started/glossary/#collections"},{default:n(()=>[v]),_:1}),O,l(o,{to:"/docs/getting-started/glossary/#fields"},{default:n(()=>[k]),_:1}),T,C,x]),A,j,I,P,D,S,F,R,K,q,N,J,W,B,Y,U,e("p",null,[L,z,E,l(o,{to:"/docs/getting-started/glossary/#alias"},{default:n(()=>[H]),_:1}),V]),G,Q,X,Z,$,ee,te,ne,oe,le,ie,se,e("p",null,[ae,l(o,{to:"/docs/getting-started/glossary/#alias"},{default:n(()=>[re]),_:1}),ce,de,he]),ue,fe,pe,me,_e,ye,ge,we,e("p",null,[Me,be,ve,l(o,{to:"/docs/getting-started/glossary/#alias"},{default:n(()=>[Oe]),_:1}),ke,l(o,{to:"/docs/getting-started/glossary/#junction-collections"},{default:n(()=>[Te]),_:1}),Ce,xe,Ae,je,Ie,Pe,De,Se,Fe]),Re,Ke,qe,Ne,Je,We,Be,Ye,e("p",null,[Ue,l(o,{to:"/docs/getting-started/glossary/#junction-collections"},{default:n(()=>[Le]),_:1}),ze]),Ee,He,Ve,Ge,Qe,e("p",null,[Xe,l(o,{to:"/docs/getting-started/glossary/#alias"},{default:n(()=>[Ze]),_:1}),$e,l(o,{to:"/docs/getting-started/glossary/#junction-collections"},{default:n(()=>[et]),_:1}),tt,nt,ot,lt,it]),st,at,rt,ct,dt,ht,e("p",null,[ut,l(o,{to:"/docs/getting-started/glossary/#junction-collections"},{default:n(()=>[ft]),_:1}),pt]),mt,_t,yt,gt,wt,Mt,e("p",null,[bt,l(o,{to:"/docs/extensions/hooks/"},{default:n(()=>[vt]),_:1}),Ot,l(o,{to:"/docs/extensions/interfaces/"},{default:n(()=>[kt]),_:1}),Tt]),Ct])]),_:1})}}};export{Pt as default};
